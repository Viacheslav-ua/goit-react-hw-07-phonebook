(this["webpackJsonpreact-ts-assembly"]=this["webpackJsonpreact-ts-assembly"]||[]).push([[0],{40:function(t,e,n){t.exports={row:"ContactList_row__25WMk",text:"ContactList_text__3rhwb",btn:"ContactList_btn__2vF9B"}},56:function(t,e,n){t.exports={backdrop:"Modal_backdrop__1ckKI",content:"Modal_content__3218z"}},57:function(t,e,n){t.exports={contactsForm:"ContactForm_contactsForm__1Nfah",input:"ContactForm_input__1ypI5",caption:"ContactForm_caption__2YSdj",btn:"ContactForm_btn__1sfrz"}},66:function(t,e,n){t.exports={caption:"Filter_caption__mFShp",input:"Filter_input__36ZmN"}},67:function(t,e,n){t.exports={container:"App_container__YEoLw",title:"App_title__mPC2u"}},87:function(t,e,n){},93:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(25),r=n.n(c),o=n(21),s=(n(87),n(37)),i=n.n(s),u=n(46),d=n(13),l=n(56),b=n.n(l),j=n(1),p=document.querySelector("#modal-root"),m=function(t){var e=t.onClose,n=t.children;Object(a.useEffect)((function(){return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}),[]);var r=function(t){"Escape"===t.code&&e()};return Object(c.createPortal)(Object(j.jsx)("div",{className:b.a.backdrop,onClick:function(t){t.currentTarget===t.target&&e()},children:Object(j.jsx)("div",{className:b.a.content,children:n})}),p)},f=n(17),O=n(64),h=n(23),v=Object(O.a)({reducerPath:"phoneBookApi",tagTypes:["Contacts"],baseQuery:Object(h.d)({baseUrl:"https://618ed24b50e24d0017ce147f.mockapi.io/"}),endpoints:function(t){return{getContacts:t.query({query:function(t){return"contacts?sortBy=name&name=".concat(t)},providesTags:function(t){return t?[].concat(Object(f.a)(t.map((function(t){return{type:"Contacts",id:t.id}}))),[{type:"Contacts",id:"LIST"}]):[{type:"Contacts",id:"LIST"}]}}),addContacts:t.mutation({query:function(t){return{url:"contacts",method:"POST",body:t}},invalidatesTags:[{type:"Contacts",id:"LIST"}]}),deleteContacts:t.mutation({query:function(t){return{url:"contacts/".concat(t),method:"DELETE"}},invalidatesTags:[{type:"Contacts",id:"LIST"}]})}}}),x=v.useGetContactsQuery,_=v.useAddContactsMutation,y=v.useDeleteContactsMutation,C=n(57),g=n.n(C),w=n(135),T=n(130),k=n(132),F=n(133),S=function(){var t=Object(a.useState)(""),e=Object(d.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(),o=Object(d.a)(r,2),s=o[0],l=o[1],b=Object(a.useState)(""),p=Object(d.a)(b,2),f=p[0],O=p[1],h=Object(a.useState)(!1),v=Object(d.a)(h,2),y=v[0],C=v[1],S=x(s).data,N=void 0===S?[]:S,E=_(),L=Object(d.a)(E,1)[0];Object(a.useEffect)((function(){""!==n&&(0===N.length?(I(),q()):P())}),[N]);var A=function(t){return function(e){new RegExp(t).test(e.currentTarget.value)&&("name"===e.currentTarget.name&&c(e.currentTarget.value),"number"===e.currentTarget.name&&O(e.currentTarget.value))}},I=function(){var t=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L({name:n,phone:f}).unwrap();case 2:return t.abrupt("return");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=function(){c(""),O("")},P=function(){C((function(t){return!t}))};return Object(j.jsxs)(j.Fragment,{children:[y&&Object(j.jsx)(m,{onClose:P,children:Object(j.jsxs)(k.a,{severity:"warning",onClose:P,children:[Object(j.jsx)(F.a,{children:"Warning"}),s," is already in contacts"]})}),Object(j.jsxs)("form",{className:g.a.contactsForm,onSubmit:function(t){t.preventDefault(),l(t.currentTarget.elements.name.value)},children:[Object(j.jsx)(T.a,{label:"Name",variant:"standard",id:"component-simple",name:"name",value:n,onChange:A("^$|^[$a-zA-Z\u0430-\u044f\u0410-\u042f -']*$"),title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0}),Object(j.jsx)(T.a,{label:"Phone number",variant:"standard",id:"component-simple",type:"tel",name:"number",value:f,onChange:A("^$|^\\+|^\\d[\\d\\s-.]*$"),title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0}),Object(j.jsx)(w.a,{type:"submit",className:g.a.btn,variant:"contained",children:"Add contact"})]})]})};var N=n(66),E=n.n(N),L=function(t){var e=t.applyFilter,n=Object(a.useState)(""),c=Object(d.a)(n,2),r=c[0],o=c[1],s=function(t,e){var n=Object(a.useState)(t),c=Object(d.a)(n,2),r=c[0],o=c[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){o(t)}),e);return function(){clearTimeout(n)}}),[t]),r}(r,500);Object(a.useEffect)((function(){e(s)}),[s]);return Object(j.jsx)("div",{children:Object(j.jsx)(T.a,{label:"Find contacts by name",variant:"standard",id:"component-simple",type:"text",name:"filter",className:E.a.input,value:r,onChange:function(t){o(t.target.value)}})})},A=n(40),I=n.n(A),q=function(){var t=Object(a.useState)(""),e=Object(d.a)(t,2),n=e[0],c=e[1],r=x(n),o=r.data,s=void 0===o?[]:o,l=r.isLoading,b=y(),p=Object(d.a)(b,1)[0],m=function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e).unwrap();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return l?Object(j.jsx)("h1",{children:"LOADING..."}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{className:I.a.title,children:"Contacts"}),Object(j.jsx)(L,{applyFilter:function(t){c(t)}}),Object(j.jsx)("ul",{className:I.a.list,children:s.map((function(t){var e=t.id,n=t.name,a=t.phone;return Object(j.jsxs)("li",{className:I.a.row,children:[Object(j.jsxs)("p",{className:I.a.text,children:[n,": ",a]}),Object(j.jsx)("button",{className:I.a.btn,onClick:function(){return m(e)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},e)}))})]})},P=n(67),M=n.n(P),B=function(){return Object(j.jsxs)("div",{className:M.a.container,children:[Object(j.jsx)("h1",{children:"Phonebook"}),Object(j.jsx)(S,{}),Object(j.jsx)(q,{})]})},$=n(4),z=n(7),D={store:Object(z.a)({reducer:Object($.a)({},v.reducerPath,v.reducer),middleware:function(t){return t().concat(v.middleware)},devTools:!1})};r.a.render(Object(j.jsx)(o.a,{store:D.store,children:Object(j.jsx)(B,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.27b50f18.chunk.js.map